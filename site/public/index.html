<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Collects.art</title>

    <!-- update the version number as needed -->
    <script defer src="/__/firebase/3.7.8/firebase-app.js"></script>
    <!-- include only the Firebase features as you need -->
    <script defer src="/__/firebase/3.7.8/firebase-auth.js"></script>
    <script defer src="/__/firebase/3.7.8/firebase-database.js"></script>
    <script defer src="/__/firebase/3.7.8/firebase-storage.js"></script>
    <!-- initialize the SDK after all desired features are loaded -->
    <script defer src="/__/firebase/init.js"></script>

    <style media="screen">

    </style>
  </head>
  <body>
    <h1>Collects</h1>
    <p id="load">...</p>
    <ul id ="collects">

    </ul>
    <small>
      Created in 2017 for <a href='https://sevenonseven.art'>Seven on Seven</a> by Nozlee Samadzadeh and Bunny Rogers
    </small>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // firebase.auth().onAuthStateChanged(user => { });
        // firebase.database().ref('/path/to/ref').on('data', snapshot => { });
        // firebase.messaging().requestPermission().then(() => { });
        // firebase.storage().ref('/path/to/ref').getDownloadURL().then(() => { });

        var load = document.getElementById('load');
        firebase.auth().signInAnonymously().then(() => {
          load.remove();
          firebase.database().ref('/collects').once('value').then(snapshot => {
            var ul = document.getElementById('collects');
            var collects = snapshot.exportVal();
            Object.keys(collects).forEach((folder) => {
              var collect = collects[folder];
              var li = document.createElement("li");
              li.appendChild(document.createTextNode(collect.title));
              ul.appendChild(li);
            });
          });
        }).catch((e) => {
          load.innerHTML = 'oops';
          console.error(e);
        });
      });
    </script>
  </body>
</html>
